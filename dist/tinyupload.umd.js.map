{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9b99311a15b0ab6b043d","webpack:///./src/utils/addEmitter.js","webpack:///./src/model/index.js","webpack:///./src/ui/index.js","webpack:///./src/style.css","webpack:///./src/model/getSignedUrl.js","webpack:///./src/model/processFiles.js","webpack:///./src/model/supportsDnd.js","webpack:///./src/model/uploadFile.js","webpack:///./src/ui/upload.svg.js","webpack:///./src/utils/bindTo.js","webpack:///./src/utils/string.js","webpack:///./~/tiny-emitter/index.js","webpack:///./src/index.js"],"names":["addEmitter","instance","emitter","emit","bind","on","name","fn","once","off","create","baseUrl","mimeTypes","dnd","supportsDnd","status","WAITING","method","files","getMimeTypes","getStatus","setFiles","f","m","console","log","FILES_CHANGE","getFiles","getMethod","upload","length","UPLOADING","processFiles","errors","responses","ERROR","SUCCESS","reset","Object","assign","hasDnd","mount","autoSubmit","multiple","WAITING_CLASS","UPLOADING_CLASS","SUCCESS_CLASS","ERROR_CLASS","HAS_DND_CLASS","AUTO_SUBMIT_CLASS","html","stringIf","join","container","document","createElement","innerHTML","appendChild","form","querySelector","filesInput","successMessageSpan","successRetryLink","errorMessageSpan","errorRetryLink","onFilesChange","e","preventDefault","UI_FILES_CHANGE","UI_SUBMIT","METHOD_FILE_INPUT","swallow","stopPropagation","classList","add","remove","dataTransfer","METHOD_DRAG_AND_DROP","UI_RESET","setWaiting","setUploading","setSuccess","count","pluralIf","setError","getSignedUrl","cb","type","xhr","window","XMLHttpRequest","qs","encodeURIComponent","url","open","onreadystatechange","readyState","JSON","parse","responseText","err","message","send","processFile","file","res","signedUrl","uploadFile","total","i","push","div","element","names","split","map","addEventListener","removeEventListener","condition","str","def","singular","plural","model","createModel","ui","createUI","UPLOAD_FILES_CHANGE","UPLOAD_WAITING","UPLOAD_UPLOADING","UPLOAD_SUCCESS","UPLOAD_ERROR"],"mappings":"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","file":"tinyupload.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tinyupload\"] = factory();\n\telse\n\t\troot[\"tinyupload\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9b99311a15b0ab6b043d","import Emitter from 'tiny-emitter'\n\nconst addEmitter = (instance) => {\n  const emitter = new Emitter()\n  const emit = emitter.emit.bind(emitter)\n\n  const on = (name, fn) => {\n    emitter.on(name, fn)\n    return instance\n  }\n  const once = (name, fn) => {\n    emitter.once(name, fn)\n    return instance\n  }\n  const off = (name, fn) => {\n    emitter.off(name, fn)\n    return instance\n  }\n\n  instance.on = on\n  instance.once = once\n  instance.off = off\n\n  return emit\n}\n\nexport default addEmitter\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/addEmitter.js","import supportsDnd from './supportsDnd'\nimport processFiles from './processFiles'\nimport addEmitter from '../utils/addEmitter'\n\nconst create = ({ baseUrl, mimeTypes }) => {\n  const instance = {}\n  const emit = addEmitter(instance)\n  const dnd = supportsDnd()\n\n  // State transitions:\n  // WAITING -> UPLOADING -> (SUCCESS -> WAITING | ERROR -> WAITING)\n\n  let status = WAITING\n  let method = null\n  let files = []\n\n  const getMimeTypes = () => mimeTypes\n\n  const getStatus = () => status\n\n  const setFiles = (f, m) => {\n    if (status !== WAITING) {\n      return console.log(`Invalid status for setting files: ${status}`)\n    }\n    files = f\n    method = m\n    emit(FILES_CHANGE, files)\n  }\n\n  const getFiles = () => files\n\n  const getMethod = () => method\n\n  const upload = () => {\n    if (!files.length) {\n      return console.log('No files to upload')\n    }\n\n    if (status !== WAITING) {\n      return console.log(`Invalid status for upload: ${status}`)\n    }\n\n    status = UPLOADING\n    emit(UPLOADING, files)\n\n    processFiles(baseUrl, files, (errors, responses) => {\n      if (errors) {\n        status = ERROR\n        emit(ERROR, errors)\n      } else {\n        status = SUCCESS\n        emit(SUCCESS, responses)\n      }\n    })\n  }\n\n  const reset = () => {\n    if (!(status === ERROR || status === SUCCESS)) {\n      return console.log(`Invalid status for reset: ${status}`)\n    }\n    status = WAITING\n    emit(WAITING)\n  }\n\n  Object.assign(instance, {\n    setFiles,\n    getStatus,\n    getFiles,\n    getMimeTypes,\n    getMethod,\n    upload,\n    reset,\n    hasDnd: () => dnd\n  })\n\n  return instance\n}\n\nexport default create\n\nexport const FILES_CHANGE = 'filesChange'\nexport const WAITING = 'waiting'\nexport const UPLOADING = 'uploading'\nexport const SUCCESS = 'success'\nexport const ERROR = 'error'\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/index.js","import addEmitter from '../utils/addEmitter'\nimport { on } from '../utils/bindTo'\nimport { stringIf, pluralIf } from '../utils/string'\nimport svg from './upload.svg'\n\nconst create = ({\n  mount,\n  mimeTypes,\n  hasDnd,\n  autoSubmit = true,\n  multiple = true\n}) => {\n  const instance = {}\n  const emit = addEmitter(instance)\n\n  const WAITING_CLASS = 'tu--is-waiting'\n  const UPLOADING_CLASS = 'tu--is-uploading'\n  const SUCCESS_CLASS = 'tu--is-success'\n  const ERROR_CLASS = 'tu--is-error'\n  const HAS_DND_CLASS = 'tu--has-dnd'\n  const AUTO_SUBMIT_CLASS = 'tu--auto-submit'\n\n  // TODO: data-multiple-caption=\"{count} files selected\"\n\n  const html = `\n    <form\n      class=\"tu ${WAITING_CLASS} ${stringIf(hasDnd, HAS_DND_CLASS)} ${stringIf(autoSubmit, AUTO_SUBMIT_CLASS)}\"\n      method=\"post\"\n      action=\"\"\n      enctype=\"multipart/form-data\"\n    >\n      <div class=\"tu__input\">\n        ${svg}\n        <input\n          class=\"tu__file\"\n          type=\"file\"\n          name=\"files[]\"\n          id=\"tu-files-input\"\n          accept=\"${mimeTypes.join(', ')}\"\n          ${stringIf(multiple, 'multiple')}\n        />\n        <label for=\"tu-files-input\">\n          <strong>${stringIf(multiple, 'Choose files', 'Choose a file')}</strong>\n          <span class=\"tu__dnd\"> or drag here</span>\n        </label>\n        <button class=\"tu__button\" type=\"submit\">Upload</button>\n      </div>\n      <div class=\"tu__uploading\">Uploading&hellip;</div>\n      <div class=\"tu__success\">Done! <span></span> <a href=\"javascript:void(0)\">Try again</a></div>\n      <div class=\"tu__error\">Error! <span></span> <a href=\"javascript:void(0)\">Try again</a></div>\n    </form>\n  `\n\n  const container = document.createElement('div')\n  container.innerHTML = html\n  mount.appendChild(container)\n\n  const form = container.querySelector('.tu')\n  const filesInput = container.querySelector('#tu-files-input')\n  const successMessageSpan = container.querySelector('.tu__success span')\n  const successRetryLink = container.querySelector('.tu__success a')\n  const errorMessageSpan = container.querySelector('.tu__error > span')\n  const errorRetryLink = container.querySelector('.tu__error > a')\n\n  const onFilesChange = (e, files, method) => {\n    e.preventDefault()\n    emit(UI_FILES_CHANGE, files, method)\n    if (autoSubmit) {\n      emit(UI_SUBMIT)\n    }\n  }\n\n  if (!autoSubmit) {\n    on(form, 'submit', (e) => {\n      e.preventDefault()\n      emit(UI_SUBMIT)\n      return false\n    })\n  }\n\n  on(filesInput, 'change', (e) => onFilesChange(e, filesInput.files, METHOD_FILE_INPUT))\n\n  if (hasDnd) {\n    const swallow = (e) => {\n      e.preventDefault()\n      e.stopPropagation()\n    }\n\n    on(form, 'drag dragstart dragend dragover dragenter dragleave drop', swallow)\n    on(form, 'dragover dragenter', () => form.classList.add('tu--is-dragover'))\n    on(form, 'dragleave dragend drop', () => form.classList.remove('tu--is-dragover'))\n    on(form, 'drop', (e) => onFilesChange(e, e.dataTransfer.files, METHOD_DRAG_AND_DROP))\n  }\n\n  const reset = (e) => {\n    e.preventDefault()\n    emit(UI_RESET)\n  }\n\n  on(successRetryLink, 'click', reset)\n  on(errorRetryLink, 'click', reset)\n\n  const setFiles = (files) => {}\n\n  const setWaiting = () => {\n    form.classList.add(WAITING_CLASS)\n    form.classList.remove(SUCCESS_CLASS)\n    form.classList.remove(ERROR_CLASS)\n  }\n\n  const setUploading = () => {\n    form.classList.remove(WAITING_CLASS)\n    form.classList.add(UPLOADING_CLASS)\n  }\n\n  const setSuccess = (responses) => {\n    console.log('Responses', responses)\n    const count = responses.length\n    successMessageSpan.innerHTML = `${count} ${pluralIf(count, 'file')} uploaded`\n    form.classList.remove(UPLOADING_CLASS)\n    form.classList.add(SUCCESS_CLASS)\n  }\n\n  const setError = (errors) => {\n    console.log('Errors', errors)\n    const count = errors.length\n    errorMessageSpan.innerHTML = `${count} ${pluralIf(count, 'error')}`\n    form.classList.remove(UPLOADING_CLASS)\n    form.classList.add(ERROR_CLASS)\n  }\n\n  Object.assign(instance, {\n    setFiles,\n    setWaiting,\n    setUploading,\n    setSuccess,\n    setError\n  })\n\n  return instance\n}\n\nexport default create\n\nexport const METHOD_FILE_INPUT = 'filesInput'\nexport const METHOD_DRAG_AND_DROP = 'dragAndDrop'\n\nexport const UI_SUBMIT = 'submit'\nexport const UI_FILES_CHANGE = 'filesChange'\nexport const UI_RESET = 'reset'\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/style.css\n// module id = 3\n// module chunks = 0","const getSignedUrl = ({ name, type, baseUrl }, cb) => {\n  const xhr = new window.XMLHttpRequest()\n\n  const qs = '?name=' + encodeURIComponent(name) + '&type=' + encodeURIComponent(type)\n  const url = baseUrl + qs\n\n  xhr.open('GET', url, true)\n  // xhr.setRequestHeader('Content-Type', 'application/json')\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200) {\n        try {\n          cb(null, JSON.parse(xhr.responseText))\n        } catch (err) {\n          cb(err)\n        }\n      } else {\n        cb({\n          message: `Could not get signed URL for ${url}`,\n          status: xhr.status\n        })\n      }\n    }\n  }\n  xhr.send()\n}\n\nexport default getSignedUrl\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/getSignedUrl.js","import getSignedUrl from './getSignedUrl'\nimport uploadFile from './uploadFile'\n\nconst processFile = (baseUrl, file, cb) => {\n  getSignedUrl({ name: file.name, type: file.type, baseUrl }, (err, res) => {\n    if (err) {\n      return cb(err)\n    }\n    const { signedUrl, url } = res\n    uploadFile(file, signedUrl, url, (err, res) => {\n      if (err) {\n        return cb(err)\n      }\n      cb(null, res)\n    })\n  })\n}\n\nconst processFiles = (baseUrl, files, cb) => {\n  let count = 0\n  let total = files.length\n  let errors = []\n  let responses = []\n  for (let i = 0; i < files.length; i += 1) {\n    processFile(baseUrl, files[i], (err, res) => {\n      count += 1\n      err\n        ? errors.push(err)\n        : responses.push(res)\n\n      if (count === total) {\n        if (errors.length) {\n          return cb(errors)\n        }\n        cb(null, responses)\n      }\n    })\n  }\n}\n\nexport default processFiles\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/processFiles.js","const supportsDnd = () => {\n  const div = document.createElement('div')\n  return ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div)\n}\n\nexport default supportsDnd\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/supportsDnd.js","const uploadFile = (file, signedUrl, url, cb) => {\n  const xhr = new window.XMLHttpRequest()\n  xhr.open('PUT', signedUrl)\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200) {\n        cb(null, { file, url })\n      } else {\n        cb({\n          message: 'Could not upload file',\n          status: xhr.status\n        })\n      }\n    }\n  }\n  xhr.send(file)\n}\n\nexport default uploadFile\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/uploadFile.js","export default '<svg class=\"tu__icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"43\" viewBox=\"0 0 50 43\"><path d=\"M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z\"></path></svg>'\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/upload.svg.js","export const on = (element, names, fn) => {\n  names.split(' ').map((name) => {\n    element.addEventListener(name, fn)\n  })\n}\n\nexport const off = (element, names, fn) => {\n  names.split(' ').map((name) => {\n    element.removeEventListener(name, fn)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/bindTo.js","export const stringIf = (condition, str, def = '') => condition ? str : def\n\nexport const pluralIf = (count, singular, plural = null) =>\n  count === 1 ? singular : (plural || `${singular}s`)\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/string.js","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tiny-emitter/index.js\n// module id = 11\n// module chunks = 0","import './style.css'\n\nimport addEmitter from './utils/addEmitter'\n\nimport createUI, {\n  UI_FILES_CHANGE,\n  UI_SUBMIT,\n  UI_RESET\n} from './ui'\n\nimport createModel, {\n  FILES_CHANGE,\n  WAITING,\n  UPLOADING,\n  SUCCESS,\n  ERROR\n} from './model'\n\nconst create = ({\n  mount,\n  baseUrl,\n  mimeTypes,\n  multiple = false,\n  autoSubmit = true\n}) => {\n  const instance = {}\n  const emit = addEmitter(instance)\n\n  const model = createModel({ baseUrl, mimeTypes })\n\n  const ui = createUI({\n    mount,\n    mimeTypes: model.getMimeTypes(),\n    hasDnd: model.hasDnd(),\n    autoSubmit,\n    multiple\n  })\n\n  ui\n    .on(UI_FILES_CHANGE, model.setFiles)\n    .on(UI_SUBMIT, model.upload)\n    .on(UI_RESET, model.reset)\n\n  model\n    .on(FILES_CHANGE, (files) => {\n      ui.setFiles(files)\n      emit(UPLOAD_FILES_CHANGE, files)\n    })\n    .on(WAITING, () => {\n      ui.setWaiting()\n      emit(UPLOAD_WAITING)\n    })\n    .on(UPLOADING, (file) => {\n      ui.setUploading(file)\n      emit(UPLOAD_UPLOADING, file)\n    })\n    .on(SUCCESS, (responses) => {\n      ui.setSuccess(responses)\n      emit(UPLOAD_SUCCESS, responses)\n    })\n    .on(ERROR, (errors) => {\n      ui.setError(errors)\n      emit(UPLOAD_ERROR, errors)\n    })\n\n  return instance\n}\n\nexport default create\n\nexport const UPLOAD_FILES_CHANGE = 'uploadFilesChange'\nexport const UPLOAD_WAITING = 'uploadWaiting'\nexport const UPLOAD_UPLOADING = 'uploadUploading'\nexport const UPLOAD_SUCCESS = 'uploadSuccess'\nexport const UPLOAD_ERROR = 'uploadError'\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}