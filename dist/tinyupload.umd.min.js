!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.tinyupload=t():n.tinyupload=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="/",t(t.s=13)}([function(n,t,e){"use strict";var r=e(12),i=e.n(r),o=function(n){var t=new i.a,e=t.emit.bind(t),r=function(e,r){return t.on(e,r),n},o=function(e,r){return t.once(e,r),n},s=function(e,r){return t.off(e,r),n};return n.on=r,n.once=o,n.off=s,e};t.a=o},function(n,t,e){"use strict";e.d(t,"a",function(){return r}),e.d(t,"b",function(){return i});var r="https://ual17esjvc.execute-api.eu-west-1.amazonaws.com/dev/UniversalRenderImageUploadLambda",i=["image/jpeg","image/png","image/bmp","image/gif","image/tiff"]},function(n,t,e){"use strict";var r=e(7),i=e(6),o=e(0);e.d(t,"b",function(){return u}),e.d(t,"c",function(){return a}),e.d(t,"d",function(){return c}),e.d(t,"e",function(){return l}),e.d(t,"f",function(){return f});var s=function(n){var t=n.baseUrl,s=n.mimeTypes,d={},p=e.i(o.a)(d),v=e.i(r.a)(),g=a,m=null,h=[],y=function(){return s},b=function(){return g},_=function(n,t){return g!==a?console.log("Invalid status for setting files: "+g):(h=n,m=t,void p(u,h,m))},L=function(){return h},w=function(){return m},x=function(){return h.length?g!==a?console.log("Invalid status for upload: "+g):(g=c,p(c,h),void e.i(i.a)(t,h,function(n,t){n?(g=f,p(f,n)):(g=l,p(l,t))})):console.log("No files to upload")},T=function(){return g!==f&&g!==l?console.log("Invalid status for reset: "+g):(g=a,void p(a))};return Object.assign(d,{setFiles:_,getStatus:b,getFiles:L,getMimeTypes:y,getMethod:w,upload:x,reset:T,hasDnd:function(){return v}}),d};t.a=s;var u="filesChange",a="waiting",c="uploading",l="success",f="error"},function(n,t,e){"use strict";var r=e(0),i=e(10),o=e(11),s=e(9);e.d(t,"c",function(){return l}),e.d(t,"b",function(){return f}),e.d(t,"d",function(){return d});var u=function(n){var t=n.mount,u=n.mimeTypes,p=n.hasDnd,v=n.autoSubmit,g=void 0===v||v,m=n.multiple,h=void 0===m||m,y={},b=e.i(r.a)(y),_="tu--is-waiting",L="tu--is-uploading",w="tu--is-success",x="tu--is-error",T="tu--has-dnd",S="tu--auto-submit",j='\n    <form\n      class="tu '+_+" "+e.i(o.a)(p,T)+" "+e.i(o.a)(g,S)+'"\n      method="post"\n      action=""\n      enctype="multipart/form-data"\n    >\n      <div class="tu__input">\n        '+s.a+'\n        <input\n          class="tu__file"\n          type="file"\n          name="files[]"\n          id="tu-files-input"\n          accept="'+u.join(", ")+'"\n          '+e.i(o.a)(h,"multiple")+'\n        />\n        <label for="tu-files-input">\n          <strong>'+e.i(o.a)(h,"Choose files","Choose a file")+'</strong>\n          <span class="tu__dnd"> or drag here</span>\n        </label>\n        <button class="tu__button" type="submit">Upload</button>\n      </div>\n      <div class="tu__uploading">Uploading&hellip;</div>\n      <div class="tu__success">Done! <span></span> <a href="javascript:void(0)">Try again</a></div>\n      <div class="tu__error">Error! <span></span> <a href="javascript:void(0)">Try again</a></div>\n    </form>\n  ',U=document.createElement("div");U.innerHTML=j,t.appendChild(U);var M=U.querySelector(".tu"),D=U.querySelector("#tu-files-input"),E=U.querySelector(".tu__success span"),q=U.querySelector(".tu__success a"),C=U.querySelector(".tu__error > span"),O=U.querySelector(".tu__error > a"),I=function(n,t,e){n.preventDefault(),b(f,t,e),g&&b(l)};if(g||e.i(i.a)(M,"submit",function(n){return n.preventDefault(),b(l),!1}),e.i(i.a)(D,"change",function(n){return I(n,D.files,a)}),p){var F=function(n){n.preventDefault(),n.stopPropagation()};e.i(i.a)(M,"drag dragstart dragend dragover dragenter dragleave drop",F),e.i(i.a)(M,"dragover dragenter",function(){return M.classList.add("tu--is-dragover")}),e.i(i.a)(M,"dragleave dragend drop",function(){return M.classList.remove("tu--is-dragover")}),e.i(i.a)(M,"drop",function(n){return I(n,n.dataTransfer.files,c)})}var H=function(n){n.preventDefault(),b(d)};e.i(i.a)(q,"click",H),e.i(i.a)(O,"click",H);var P=function(n){},R=function(){M.classList.add(_),M.classList.remove(w),M.classList.remove(x)},z=function(){M.classList.remove(_),M.classList.add(L)},k=function(n){console.log("Responses",n);var t=n.length;E.innerHTML=t+" "+e.i(o.b)(t,"file")+" uploaded",M.classList.remove(L),M.classList.add(w)},B=function(n){console.log("Errors",n);var t=n.length;C.innerHTML=t+" "+e.i(o.b)(t,"error"),M.classList.remove(L),M.classList.add(x)};return Object.assign(y,{setFiles:P,setWaiting:R,setUploading:z,setSuccess:k,setError:B}),y};t.a=u;var a="filesInput",c="dragAndDrop",l="submit",f="filesChange",d="reset"},function(n,t){},function(n,t,e){"use strict";var r=function(n,t){var e=n.name,r=n.type,i=n.baseUrl,o=new window.XMLHttpRequest,s="?name="+e+"&type="+r,u=i+s;o.open("GET",u,!0),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)try{t(null,JSON.parse(o.responseText))}catch(n){t(n)}else t({message:"Could not get signed URL",status:o.status})},o.send()};t.a=r},function(n,t,e){"use strict";var r=e(5),i=e(8),o=function(n,t,o){e.i(r.a)({name:t.name,type:t.type,baseUrl:n},function(n,r){var s=r.signedUrl,u=r.url;return n?o(n):void e.i(i.a)(t,s,u,function(n,t){return n?o(n):void o(null,t)})})},s=function(n,t,e){for(var r=0,i=t.length,s=[],u=[],a=0;a<t.length;a+=1)o(n,t[a],function(n,t){if(r+=1,n?s.push(n):u.push(t),r===i){if(s.length)return e(s);e(null,u)}})};t.a=s},function(n,t,e){"use strict";var r=function(){var n=document.createElement("div");return"draggable"in n||"ondragstart"in n&&"ondrop"in n};t.a=r},function(n,t,e){"use strict";var r=function(n,t,e,r){var i=new window.XMLHttpRequest;i.open("PUT",t),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?r(null,{file:n,url:e}):r({message:"Could not upload file",status:i.status}))},i.send(n)};t.a=r},function(n,t,e){"use strict";t.a='<svg class="tu__icon" xmlns="http://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43"><path d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"></path></svg>'},function(n,t,e){"use strict";e.d(t,"a",function(){return r});var r=function(n,t,e){t.split(" ").map(function(t){n.addEventListener(t,e)})}},function(n,t,e){"use strict";e.d(t,"a",function(){return r}),e.d(t,"b",function(){return i});var r=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n?t:e},i=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return 1===n?t:e||t+"s"}},function(n,t){function e(){}e.prototype={on:function(n,t,e){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:t,ctx:e}),this},once:function(n,t,e){function r(){i.off(n,r),t.apply(e,arguments)}var i=this;return r._=t,this.on(n,r,e)},emit:function(n){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[n]||[]).slice(),r=0,i=e.length;for(r;r<i;r++)e[r].fn.apply(e[r].ctx,t);return this},off:function(n,t){var e=this.e||(this.e={}),r=e[n],i=[];if(r&&t)for(var o=0,s=r.length;o<s;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?e[n]=i:delete e[n],this}},n.exports=e},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(4),i=(e.n(r),e(1)),o=e(3),s=e(2),u=function(){var n=e.i(s.a)({baseUrl:i.a,mimeTypes:i.b}),t=document.getElementById("mount"),r=e.i(o.a)({mount:t,mimeTypes:n.getMimeTypes(),hasDnd:n.hasDnd(),autoSubmit:!0,multiple:!0});r.on(o.b,n.setFiles).on(o.c,n.upload).on(o.d,n.reset),n.on(s.b,r.setFiles).on(s.c,r.setWaiting).on(s.d,r.setUploading).on(s.e,r.setSuccess).on(s.f,r.setError)};t.default=u}])});