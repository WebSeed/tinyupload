!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.tinyupload=t():n.tinyupload=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="/",t(t.s=12)}([function(n,t,e){"use strict";var r=e(11),i=e.n(r),o=function(n){var t=new i.a,e=t.emit.bind(t),r=function(e,r){return t.on(e,r),n},o=function(e,r){return t.once(e,r),n},u=function(e,r){return t.off(e,r),n};return n.on=r,n.once=o,n.off=u,e};t.a=o},function(n,t,e){"use strict";var r=e(6),i=e(5),o=e(0);e.d(t,"b",function(){return s}),e.d(t,"c",function(){return a}),e.d(t,"d",function(){return c}),e.d(t,"e",function(){return l}),e.d(t,"f",function(){return f});var u=function(n){var t=n.baseUrl,u=n.mimeTypes,d={},p=e.i(o.a)(d),v=e.i(r.a)(),g=a,m=null,h=[],y=function(){return u},b=function(){return g},_=function(n,t){return g!==a?console.log("Invalid status for setting files: "+g):(h=n,m=t,void p(s,h))},L=function(){return h},U=function(){return m},S=function(){return h.length?g!==a?console.log("Invalid status for upload: "+g):(g=c,p(c,h),void e.i(i.a)(t,h,function(n,t){n?(g=f,p(f,n)):(g=l,p(l,t))})):console.log("No files to upload")},w=function(){return g!==f&&g!==l?console.log("Invalid status for reset: "+g):(g=a,void p(a))};return Object.assign(d,{setFiles:_,getStatus:b,getFiles:L,getMimeTypes:y,getMethod:U,upload:S,reset:w,hasDnd:function(){return v}}),d};t.a=u;var s="filesChange",a="waiting",c="uploading",l="success",f="error"},function(n,t,e){"use strict";var r=e(0),i=e(9),o=e(10),u=e(8);e.d(t,"c",function(){return l}),e.d(t,"b",function(){return f}),e.d(t,"d",function(){return d});var s=function(n){var t=n.mount,s=n.mimeTypes,p=n.hasDnd,v=n.autoSubmit,g=void 0===v||v,m=n.multiple,h=void 0===m||m,y={},b=e.i(r.a)(y),_="tu--is-waiting",L="tu--is-uploading",U="tu--is-success",S="tu--is-error",w="tu--has-dnd",D="tu--auto-submit",T='\n    <form\n      class="tu '+_+" "+e.i(o.a)(p,w)+" "+e.i(o.a)(g,D)+'"\n      method="post"\n      action=""\n      enctype="multipart/form-data"\n    >\n      <div class="tu__input">\n        '+u.a+'\n        <input\n          class="tu__file"\n          type="file"\n          name="files[]"\n          id="tu-files-input"\n          accept="'+s.join(", ")+'"\n          '+e.i(o.a)(h,"multiple")+'\n        />\n        <label for="tu-files-input">\n          <span class="tu__dnd">Drop '+e.i(o.b)(h,"file")+' here or</span>\n          <strong>browse</strong>\n        </label>\n        <button class="tu__button" type="submit">Upload</button>\n      </div>\n      <div class="tu__uploading">Uploading&hellip;</div>\n      <div class="tu__success">Done! <span></span> <a href="javascript:void(0)">Try again</a></div>\n      <div class="tu__error">Error! <span></span> <a href="javascript:void(0)">Try again</a></div>\n    </form>\n  ',x=document.createElement("div");x.innerHTML=T,t.appendChild(x);var O=x.querySelector(".tu"),E=x.querySelector("#tu-files-input"),C=x.querySelector(".tu__success span"),M=x.querySelector(".tu__success a"),j=x.querySelector(".tu__error > span"),P=x.querySelector(".tu__error > a"),I=function(n,t,e){n.preventDefault(),b(f,t,e),g&&b(l)};if(g||e.i(i.a)(O,"submit",function(n){return n.preventDefault(),b(l),!1}),e.i(i.a)(E,"change",function(n){return I(n,E.files,a)}),p){var A=function(n){n.preventDefault(),n.stopPropagation()};e.i(i.a)(O,"drag dragstart dragend dragover dragenter dragleave drop",A),e.i(i.a)(O,"dragover dragenter",function(){return O.classList.add("tu--is-dragover")}),e.i(i.a)(O,"dragleave dragend drop",function(){return O.classList.remove("tu--is-dragover")}),e.i(i.a)(O,"drop",function(n){return I(n,n.dataTransfer.files,c)})}var R=function(n){n.preventDefault(),b(d)};e.i(i.a)(M,"click",R),e.i(i.a)(P,"click",R);var q=function(n){},F=function(){O.classList.add(_),O.classList.remove(U),O.classList.remove(S)},H=function(){O.classList.remove(_),O.classList.add(L)},N=function(n){console.log("Responses",n);var t=n.length;C.innerHTML=t+" "+e.i(o.b)(t,"file")+" uploaded",O.classList.remove(L),O.classList.add(U)},G=function(n){console.log("Errors",n);var t=n.length;j.innerHTML=t+" "+e.i(o.b)(t,"error"),O.classList.remove(L),O.classList.add(S)};return Object.assign(y,{setFiles:q,setWaiting:F,setUploading:H,setSuccess:N,setError:G}),y};t.a=s;var a="filesInput",c="dragAndDrop",l="submit",f="filesChange",d="reset"},function(n,t){},function(n,t,e){"use strict";var r=function(n,t){var e=n.name,r=n.type,i=n.baseUrl,o=new window.XMLHttpRequest,u="?name="+encodeURIComponent(e)+"&type="+encodeURIComponent(r),s=i+u;o.open("GET",s,!0),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)try{t(null,JSON.parse(o.responseText))}catch(n){t(n)}else t({message:"Could not get signed URL for "+s,status:o.status})},o.send()};t.a=r},function(n,t,e){"use strict";var r=e(4),i=e(7),o=function(n,t,o){e.i(r.a)({name:t.name,type:t.type,baseUrl:n},function(n,r){if(n)return o(n);var u=r.signedUrl,s=r.url;e.i(i.a)(t,u,s,function(n,t){return n?o(n):void o(null,t)})})},u=function(n,t,e){for(var r=0,i=t.length,u=[],s=[],a=0;a<t.length;a+=1)o(n,t[a],function(n,t){if(r+=1,n?u.push(n):s.push(t),r===i){if(u.length)return e(u);e(null,s)}})};t.a=u},function(n,t,e){"use strict";var r=function(){var n=document.createElement("div");return"draggable"in n||"ondragstart"in n&&"ondrop"in n};t.a=r},function(n,t,e){"use strict";var r=function(n,t,e,r){var i=new window.XMLHttpRequest;i.open("PUT",t),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?r(null,{file:n,url:e}):r({message:"Could not upload file",status:i.status}))},i.send(n)};t.a=r},function(n,t,e){"use strict";t.a='\n  <svg class="tu__icon" width="25" height="21" viewBox="0 0 25 21" xmlns="http://www.w3.org/2000/svg">\n    <g fill="#707070" fill-rule="evenodd">\n      <path d="M13.125 19.648v-8.592l2.05 2.075c.282.287.74.287 1.024 0 .28-.286.28-.75 0-1.036L12.912 8.77c-.035-.035-.073-.065-.11-.092-.018-.01-.035-.017-.052-.027-.023-.013-.048-.028-.073-.04-.022-.008-.044-.013-.065-.02-.024-.006-.047-.015-.07-.02-.038-.008-.075-.01-.112-.01-.01 0-.02-.005-.03-.005-.012 0-.022.004-.033.004-.037 0-.073.003-.108.01-.027.006-.05.016-.076.023-.02.007-.04.01-.06.018-.03.013-.055.028-.08.044-.016.008-.03.014-.046.024-.04.027-.077.058-.11.092L8.6 12.094c-.14.143-.212.332-.212.518 0 .188.07.376.212.52.283.285.74.285 1.024 0l2.05-2.076v8.593c0 .404.323.732.722.732.403 0 .727-.328.727-.734z"/><path d="M20.703 6.285c-.224-3.37-3.005-6.042-6.39-6.042-2.13 0-4.103 1.09-5.28 2.824-.476-.206-.99-.315-1.514-.315-2.007 0-3.664 1.54-3.877 3.514C1.603 7.056.21 9.038.21 11.324c0 2.998 2.41 5.437 5.373 5.437h4.08v-1.254h-4.08c-2.284 0-4.134-1.87-4.134-4.182 0-2.074 1.5-3.785 3.46-4.112-.033-.166-.05-.337-.05-.513 0-1.49 1.19-2.693 2.66-2.693.78 0 1.473.345 1.96.886.735-1.983 2.618-3.395 4.833-3.395 2.853 0 5.165 2.34 5.165 5.227 0 .166-.006.332-.024.494 1.923.36 3.383 2.056 3.383 4.104 0 2.313-1.85 4.182-4.133 4.182h-3.616v1.255h3.616c2.962 0 5.372-2.438 5.372-5.436 0-2.25-1.368-4.227-3.373-5.04z"/>\n    </g>\n  </svg>\n'},function(n,t,e){"use strict";e.d(t,"a",function(){return r});var r=function(n,t,e){t.split(" ").map(function(t){n.addEventListener(t,e)})}},function(n,t,e){"use strict";e.d(t,"a",function(){return r}),e.d(t,"b",function(){return i});var r=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n?t:e},i=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return("number"==typeof n?1!==n:n)?e||t+"s":t}},function(n,t){function e(){}e.prototype={on:function(n,t,e){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:t,ctx:e}),this},once:function(n,t,e){function r(){i.off(n,r),t.apply(e,arguments)}var i=this;return r._=t,this.on(n,r,e)},emit:function(n){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[n]||[]).slice(),r=0,i=e.length;for(r;r<i;r++)e[r].fn.apply(e[r].ctx,t);return this},off:function(n,t){var e=this.e||(this.e={}),r=e[n],i=[];if(r&&t)for(var o=0,u=r.length;o<u;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?e[n]=i:delete e[n],this}},n.exports=e},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(3),i=(e.n(r),e(0)),o=e(2),u=e(1);e.d(t,"UPLOAD_FILES_CHANGE",function(){return a}),e.d(t,"UPLOAD_WAITING",function(){return c}),e.d(t,"UPLOAD_UPLOADING",function(){return l}),e.d(t,"UPLOAD_SUCCESS",function(){return f}),e.d(t,"UPLOAD_ERROR",function(){return d});var s=function(n){var t=n.mount,r=n.baseUrl,s=n.mimeTypes,p=n.multiple,v=void 0!==p&&p,g=n.autoSubmit,m=void 0===g||g,h={},y=e.i(i.a)(h),b=e.i(u.a)({baseUrl:r,mimeTypes:s}),_=e.i(o.a)({mount:t,mimeTypes:b.getMimeTypes(),hasDnd:b.hasDnd(),autoSubmit:m,multiple:v});return _.on(o.b,b.setFiles).on(o.c,b.upload).on(o.d,b.reset),b.on(u.b,function(n){_.setFiles(n),y(a,n)}).on(u.c,function(){_.setWaiting(),y(c)}).on(u.d,function(n){_.setUploading(n),y(l,n)}).on(u.e,function(n){_.setSuccess(n),y(f,n)}).on(u.f,function(n){_.setError(n),y(d,n)}),h};t.default=s;var a="uploadFilesChange",c="uploadWaiting",l="uploadUploading",f="uploadSuccess",d="uploadError"}])});