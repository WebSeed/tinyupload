!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.tinyupload=t():n.tinyupload=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="/",t(t.s=12)}([function(n,t,e){"use strict";var r=e(11),i=e.n(r),o=function(n){var t=new i.a,e=t.emit.bind(t),r=function(e,r){return t.on(e,r),n},o=function(e,r){return t.once(e,r),n},u=function(e,r){return t.off(e,r),n};return n.on=r,n.once=o,n.off=u,e};t.a=o},function(n,t,e){"use strict";var r=e(6),i=e(5),o=e(0);e.d(t,"b",function(){return s}),e.d(t,"c",function(){return a}),e.d(t,"d",function(){return c}),e.d(t,"e",function(){return l}),e.d(t,"f",function(){return f});var u=function(n){var t=n.baseUrl,u=n.mimeTypes,d={},p=e.i(o.a)(d),v=e.i(r.a)(),g=a,m=null,h=[],y=function(){return u},b=function(){return g},_=function(n,t){return g!==a?console.log("Invalid status for setting files: "+g):(h=n,m=t,void p(s,h))},L=function(){return h},U=function(){return m},S=function(){return h.length?g!==a?console.log("Invalid status for upload: "+g):(g=c,p(c,h),void e.i(i.a)(t,h,function(n,t){n?(g=f,p(f,n)):(g=l,p(l,t))})):console.log("No files to upload")},T=function(){return g!==f&&g!==l?console.log("Invalid status for reset: "+g):(g=a,void p(a))};return Object.assign(d,{setFiles:_,getStatus:b,getFiles:L,getMimeTypes:y,getMethod:U,upload:S,reset:T,hasDnd:function(){return v}}),d};t.a=u;var s="filesChange",a="waiting",c="uploading",l="success",f="error"},function(n,t,e){"use strict";var r=e(0),i=e(9),o=e(10),u=e(8);e.d(t,"c",function(){return l}),e.d(t,"b",function(){return f}),e.d(t,"d",function(){return d});var s=function(n){var t=n.mount,s=n.mimeTypes,p=n.hasDnd,v=n.autoSubmit,g=void 0===v||v,m=n.multiple,h=void 0===m||m,y={},b=e.i(r.a)(y),_="tu--is-waiting",L="tu--is-uploading",U="tu--is-success",S="tu--is-error",T="tu--has-dnd",w="tu--auto-submit",D='\n    <form\n      class="tu '+_+" "+e.i(o.a)(p,T)+" "+e.i(o.a)(g,w)+'"\n      method="post"\n      action=""\n      enctype="multipart/form-data"\n    >\n      <div class="tu__input">\n        '+u.a+'\n        <input\n          class="tu__file"\n          type="file"\n          name="files[]"\n          id="tu-files-input"\n          accept="'+s.join(", ")+'"\n          '+e.i(o.a)(h,"multiple")+'\n        />\n        <label for="tu-files-input">\n          <strong>'+e.i(o.a)(h,"Choose files","Choose a file")+'</strong>\n          <span class="tu__dnd"> or drag here</span>\n        </label>\n        <button class="tu__button" type="submit">Upload</button>\n      </div>\n      <div class="tu__uploading">Uploading&hellip;</div>\n      <div class="tu__success">Done! <span></span> <a href="javascript:void(0)">Try again</a></div>\n      <div class="tu__error">Error! <span></span> <a href="javascript:void(0)">Try again</a></div>\n    </form>\n  ',x=document.createElement("div");x.innerHTML=D,t.appendChild(x);var O=x.querySelector(".tu"),C=x.querySelector("#tu-files-input"),E=x.querySelector(".tu__success span"),j=x.querySelector(".tu__success a"),M=x.querySelector(".tu__error > span"),P=x.querySelector(".tu__error > a"),I=function(n,t,e){n.preventDefault(),b(f,t,e),g&&b(l)};if(g||e.i(i.a)(O,"submit",function(n){return n.preventDefault(),b(l),!1}),e.i(i.a)(C,"change",function(n){return I(n,C.files,a)}),p){var A=function(n){n.preventDefault(),n.stopPropagation()};e.i(i.a)(O,"drag dragstart dragend dragover dragenter dragleave drop",A),e.i(i.a)(O,"dragover dragenter",function(){return O.classList.add("tu--is-dragover")}),e.i(i.a)(O,"dragleave dragend drop",function(){return O.classList.remove("tu--is-dragover")}),e.i(i.a)(O,"drop",function(n){return I(n,n.dataTransfer.files,c)})}var R=function(n){n.preventDefault(),b(d)};e.i(i.a)(j,"click",R),e.i(i.a)(P,"click",R);var q=function(n){},F=function(){O.classList.add(_),O.classList.remove(U),O.classList.remove(S)},H=function(){O.classList.remove(_),O.classList.add(L)},N=function(n){console.log("Responses",n);var t=n.length;E.innerHTML=t+" "+e.i(o.b)(t,"file")+" uploaded",O.classList.remove(L),O.classList.add(U)},G=function(n){console.log("Errors",n);var t=n.length;M.innerHTML=t+" "+e.i(o.b)(t,"error"),O.classList.remove(L),O.classList.add(S)};return Object.assign(y,{setFiles:q,setWaiting:F,setUploading:H,setSuccess:N,setError:G}),y};t.a=s;var a="filesInput",c="dragAndDrop",l="submit",f="filesChange",d="reset"},function(n,t){},function(n,t,e){"use strict";var r=function(n,t){var e=n.name,r=n.type,i=n.baseUrl,o=new window.XMLHttpRequest,u="?name="+encodeURIComponent(e)+"&type="+encodeURIComponent(r),s=i+u;o.open("GET",s,!0),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)try{t(null,JSON.parse(o.responseText))}catch(n){t(n)}else t({message:"Could not get signed URL for "+s,status:o.status})},o.send()};t.a=r},function(n,t,e){"use strict";var r=e(4),i=e(7),o=function(n,t,o){e.i(r.a)({name:t.name,type:t.type,baseUrl:n},function(n,r){if(n)return o(n);var u=r.signedUrl,s=r.url;e.i(i.a)(t,u,s,function(n,t){return n?o(n):void o(null,t)})})},u=function(n,t,e){for(var r=0,i=t.length,u=[],s=[],a=0;a<t.length;a+=1)o(n,t[a],function(n,t){if(r+=1,n?u.push(n):s.push(t),r===i){if(u.length)return e(u);e(null,s)}})};t.a=u},function(n,t,e){"use strict";var r=function(){var n=document.createElement("div");return"draggable"in n||"ondragstart"in n&&"ondrop"in n};t.a=r},function(n,t,e){"use strict";var r=function(n,t,e,r){var i=new window.XMLHttpRequest;i.open("PUT",t),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?r(null,{file:n,url:e}):r({message:"Could not upload file",status:i.status}))},i.send(n)};t.a=r},function(n,t,e){"use strict";t.a='<svg class="tu__icon" xmlns="http://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43"><path d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"></path></svg>'},function(n,t,e){"use strict";e.d(t,"a",function(){return r});var r=function(n,t,e){t.split(" ").map(function(t){n.addEventListener(t,e)})}},function(n,t,e){"use strict";e.d(t,"a",function(){return r}),e.d(t,"b",function(){return i});var r=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n?t:e},i=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return 1===n?t:e||t+"s"}},function(n,t){function e(){}e.prototype={on:function(n,t,e){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:t,ctx:e}),this},once:function(n,t,e){function r(){i.off(n,r),t.apply(e,arguments)}var i=this;return r._=t,this.on(n,r,e)},emit:function(n){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[n]||[]).slice(),r=0,i=e.length;for(r;r<i;r++)e[r].fn.apply(e[r].ctx,t);return this},off:function(n,t){var e=this.e||(this.e={}),r=e[n],i=[];if(r&&t)for(var o=0,u=r.length;o<u;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?e[n]=i:delete e[n],this}},n.exports=e},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(3),i=(e.n(r),e(0)),o=e(2),u=e(1);e.d(t,"UPLOAD_FILES_CHANGE",function(){return a}),e.d(t,"UPLOAD_WAITING",function(){return c}),e.d(t,"UPLOAD_UPLOADING",function(){return l}),e.d(t,"UPLOAD_SUCCESS",function(){return f}),e.d(t,"UPLOAD_ERROR",function(){return d});var s=function(n){var t=n.mount,r=n.baseUrl,s=n.mimeTypes,p=n.multiple,v=void 0!==p&&p,g=n.autoSubmit,m=void 0===g||g,h={},y=e.i(i.a)(h),b=e.i(u.a)({baseUrl:r,mimeTypes:s}),_=e.i(o.a)({mount:t,mimeTypes:b.getMimeTypes(),hasDnd:b.hasDnd(),autoSubmit:m,multiple:v});return _.on(o.b,b.setFiles).on(o.c,b.upload).on(o.d,b.reset),b.on(u.b,function(n){_.setFiles(n),y(a,n)}).on(u.c,function(){_.setWaiting(),y(c)}).on(u.d,function(n){_.setUploading(n),y(l,n)}).on(u.e,function(n){_.setSuccess(n),y(f,n)}).on(u.f,function(n){_.setError(n),y(d,n)}),h};t.default=s;var a="uploadFilesChange",c="uploadWaiting",l="uploadUploading",f="uploadSuccess",d="uploadError"}])});